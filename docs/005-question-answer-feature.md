# チケット #005: 質問への回答機能

## 概要
マインドマップ上の質問ノードをクリックして回答を入力し、さらに深掘り質問を生成する機能

## 受け入れ条件
- 質問ノードをクリックすると回答入力モーダルが表示されること
- 回答を送信すると回答ノードが追加されること
- 回答から新たな質問が生成されること
- 階層的な深掘りが可能であること

## タスクリスト

### 回答入力UI
- [x] 回答入力モーダルコンポーネントの作成
- [x] テキストエリア（回答入力用）の実装
- [x] 送信・キャンセルボタンの実装
- [x] モーダルのオーバーレイ実装

### インタラクション
- [x] 質問ノードのクリックイベント処理
- [x] モーダルの開閉制御
- [x] 回答送信処理
- [x] ESCキーでのモーダルクローズ

### データ処理
- [x] 回答ノードの作成と追加
- [x] 親子関係の設定
- [x] LocalStorageへの保存

### 階層的質問生成
- [x] 回答内容からの質問生成
- [x] 新規質問ノードの追加
- [x] ノード配置の自動調整
- [x] 階層レベルの管理

### ビジュアル更新
- [x] 新規ノードの追加アニメーション
- [x] エッジ（接続線）の自動追加
- [x] ビューポートの自動調整

## 技術的詳細

### ノード階層管理
```typescript
interface NodeHierarchy {
  nodeId: string;
  level: number;  // 0: main, 1: first questions, 2+: deeper levels
  parentId: string;
  children: string[];
}
```

### 回答からの質問生成プロンプト
```typescript
const prompt = `
以下の質問と回答を読んで、さらに深掘りするための
フォローアップ質問を3つ生成してください。

元の質問：${originalQuestion}
回答：${answer}

質問は以下の形式でJSON配列として返してください：
["質問1", "質問2", "質問3"]
`;
```

### レイアウト調整
- 新規ノードは親ノードから150px離れた位置に配置
- 重なり防止のための自動位置調整
- 最大階層: 5レベルまで（パフォーマンス考慮）

## 依存関係
- チケット#004（AI質問生成）が完了していること
- マインドマップの基本機能が動作していること

## 備考
- 回答は後から編集不可
- 各質問に対して1つの回答のみ可能
- 回答が空の場合は送信できない