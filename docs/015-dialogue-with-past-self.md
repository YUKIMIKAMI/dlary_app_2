# チケット #011: 過去の自分との対話モード

## 概要
過去の日記とその回答を学習したAIと対話できる機能。ユーザーの思考パターンや価値観を理解した「過去の自分」として振る舞う。

## 受け入れ条件
- すべての日記データ（回答含む）を文脈として使用
- チャット形式のUI
- 過去の自分の思考パターンを反映した返答
- AIが生成した質問ノードは除外

## 技術要件

### データ収集
```typescript
interface PastSelfContext {
  diaries: Array<{
    date: Date;
    content: string;
    answers: Array<{
      question: string;
      answer: string;
    }>;
    comments: string[];
  }>;
  totalEntries: number;
  dateRange: { start: Date; end: Date };
}
```

### プロンプト設計
```typescript
const prompt = `
あなたは${userName}の過去の自分です。
以下の日記と回答履歴から、その人の：
- 価値観
- 思考パターン
- 関心事
- 感情の傾向
を理解して、過去の自分として対話してください。

過去の日記データ：
${JSON.stringify(context)}

現在の質問：${userQuestion}
`;
```

### UI設計
```
[過去の自分との対話]
┌─────────────────────────┐
│ 📅 2020-2024の自分      │
│ 日記: 523件             │
└─────────────────────────┘

💭 過去の自分：
「その悩み、2023年の夏にも似たようなことがあったよ。
あの時は...」

あなた：[入力フィールド]
```

## タスクリスト
- [ ] 対話ページの作成
- [ ] データ集計サービス
- [ ] コンテキスト生成機能
- [ ] チャットUI実装
- [ ] 会話履歴の保存